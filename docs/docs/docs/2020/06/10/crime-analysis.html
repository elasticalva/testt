<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>LAPD Crime Analysis | Papermgzn</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="LAPD Crime Analysis" /><meta name="author" content="elasticalva" /><meta property="og:locale" content="en_US" /><meta name="description" content="Coffee" /><meta property="og:description" content="Coffee" /><link rel="canonical" href="github.com/elasticalva/elasticalva.github.io/2020/06/10/crime-analysis" /><meta property="og:url" content="github.com/elasticalva/elasticalva.github.io/2020/06/10/crime-analysis" /><meta property="og:site_name" content="Papermgzn" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-10T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="LAPD Crime Analysis" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@elasticalva" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"github.com/elasticalva/elasticalva.github.io/2020/06/10/crime-analysis","headline":"LAPD Crime Analysis","dateModified":"2020-06-10T00:00:00+02:00","datePublished":"2020-06-10T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"github.com/elasticalva/elasticalva.github.io/2020/06/10/crime-analysis"},"author":{"@type":"Person","name":"elasticalva"},"description":"Coffee","@context":"https://schema.org"}</script><link rel="shortcut icon" href="/elasticalva.github.io/icon.svg"><link rel="alternate" type="application/atom+xml" title="Papermgzn" href="/elasticalva.github.io/atom.xml"><link rel="alternate" title="Papermgzn" type="application/json" href="github.com/elasticalva/elasticalva.github.io /feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/elasticalva.github.io/sitemap.xml" /> <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js"></script> <script src="/elasticalva.github.io/assets/dark.js"></script><style type="text/css"> @import url("https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital@1&family=Montserrat:wght@800&family=Quicksand&family=Roboto:ital,wght@1,100;1,400;1,700&display=swap");@supports (font-variation-settings: normal){html{font-family:"Quicksand"}}body{font-size:1rem;line-height:1.5;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}nav a{font-weight:700;font-style:italic}a{color:inherit}a:link{text-decoration:underline;color:inherit}a:visited{color:inherit}a:active{opacity:0.6}h3,h4,h5{font-weight:500}h1{font-family:montserrat;font-size:2rem;font-weight:500}h2{font-family:Libre Baskerville !important;font-size:1.6rem;opacity:0.8;font-weight:400;font-style:italic}p{font-family:quicksand;font-size:1.2rem}blockquote{background:#f9f9f9;border-left:5px solid black;font-size:120%;margin:2rem 0;padding:1rem}blockquote p{margin:0}blockquote footer{font-size:80%;margin:1rem 0 0 0}dl dt{margin-bottom:0.5rem}dl dd{font-style:italic;margin-bottom:2rem}code,.highlight{background:#edf2f7;overflow:auto}code{word-break:break-all}code{padding:0.1rem 0.3rem}pre{padding:1em}.date{opacity:0.6;font-family:Roboto;font-size:1rem;font-style:italic}html{box-sizing:border-box;margin:0;padding:0}*,*:before,*:after{box-sizing:inherit}body{-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out;background-color:#edf2f7;color:#333333;margin:18px}header,main{margin:0 auto;max-width:50rem}.grid{display:flex;flex-wrap:wrap;display:grid;grid-template-columns:1fr;grid-auto-rows:minmax(10rem, auto);grid-gap:1rem}.card{display:flex;align-items:left;justify-content:left;min-height:10rem;position:relative;margin-left:1rem;margin-right:1rem;flex:1 1 10rem}nav ul{list-style:none !important;padding:0;text-align:right;font-family:roboto;font-size:1rem}nav ul li{display:inline-block;margin-right:0.5rem;margin-left:0.5rem}nav ul a.active{color:#ff8095;opacity:1}nav ul a.active:hover{opacity:0.7}a,a:visited{text-decoration:none;text-transform:uppercase;color:inherit;letter-spacing:0.05em;opacity:0.7}a:hover,a:visited:hover{opacity:0.4}@supports (display: grid){.card{margin:0}}.card:nth-child(4n+1){background:#cccccc}.card:nth-child(4n+1) a,.card:nth-child(4n+1) h2,.card:nth-child(4n+1) .date{color:#444444;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.card:nth-child(4n+2){background:#ff8095}.card:nth-child(4n+2) a,.card:nth-child(4n+2) h2,.card:nth-child(4n+2) .date{color:#ffd480;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.card:nth-child(4n+3){background:#ffd480}.card:nth-child(4n+3) a,.card:nth-child(4n+3) h2,.card:nth-child(4n+3) .date{color:#ff8095;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.card:nth-child(4n+4){background:#cccccc}.card:nth-child(4n+4) a,.card:nth-child(4n+4) h2,.card:nth-child(4n+4) .date{color:#444444;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.card{background:white;-webkit-box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1);box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1);text-decoration:none;color:inherit}.card .thumb{padding-bottom:60%;background-size:cover;background-position:center center}.card a{font-family:Montserrat;font-size:1.2rem;text-transform:uppercase;text-decoration:none}.card h2{font-size:1.3rem;margin:0;opacity:0.8;font-weight:400;font-style:italic}.card h1{font-size:1.3rem;margin:0}.card time{font-family:Roboto;font-size:0.8rem;font-weight:400;text-transform:uppercase;letter-spacing:0.05em}.card .meta{padding:2rem;display:flex;flex:1;justify-content:space-between;flex-direction:column;cursor:pointer}.post{background-color:white;color:#666666;padding:2rem;-webkit-box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1);box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1)}.card{transition:all 0.3s cubic-bezier(0.25, 0.45, 0.45, 0.95)}.card:hover{transform:scale(1.02)}ul,ol{padding:0;list-style-position:inside}table{border-collapse:collapse;text-align:left;width:100%}table tr{border-bottom:1px solid black}table td{padding:0.5rem}img{width:100%;margin:0.5rem 0}[data-theme="dark"] body{background-color:#333333;color:#999999}[data-theme="dark"] nav a.active{color:#ff8095;opacity:1}[data-theme="dark"] nav a.active:hover{opacity:0.7}[data-theme="dark"] nav a,[data-theme="dark"] nav a:visited{opacity:1}[data-theme="dark"] nav a:hover,[data-theme="dark"] nav a:visited:hover{opacity:0.7}[data-theme="dark"] footer{color:#999999 !important}[data-theme="dark"] #search-input{color:#333333;border:1px solid grey;background:#cccccc}[data-theme="dark"] .post{background-color:#808080;color:#333333;-webkit-box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1);box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.1)}[data-theme="dark"] .post p,[data-theme="dark"] .post h2,[data-theme="dark"] .post .date{color:#edf2f7}[data-theme="dark"] .post a{color:#cccccc}[data-theme="dark"] .card:nth-child(4n+1){background:#808080}[data-theme="dark"] .card:nth-child(4n+1) a,[data-theme="dark"] .card:nth-child(4n+1) h2,[data-theme="dark"] .card:nth-child(4n+1) .date{color:#333333;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}[data-theme="dark"] .card:nth-child(4n+2){background:#ff80958e}[data-theme="dark"] .card:nth-child(4n+2) a,[data-theme="dark"] .card:nth-child(4n+2) h2,[data-theme="dark"] .card:nth-child(4n+2) .date{color:#333333;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}[data-theme="dark"] .card:nth-child(4n+3){background:#ffd5808e}[data-theme="dark"] .card:nth-child(4n+3) a,[data-theme="dark"] .card:nth-child(4n+3) h2,[data-theme="dark"] .card:nth-child(4n+3) .date{color:#333333;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}[data-theme="dark"] .card:nth-child(4n+4){background:#808080}[data-theme="dark"] .card:nth-child(4n+4) a,[data-theme="dark"] .card:nth-child(4n+4) h2,[data-theme="dark"] .card:nth-child(4n+4) .date{color:#333333;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.switch{top:3px;position:relative;display:inline-block;width:39px;height:20px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ffd480;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}.slider:before{position:absolute;content:"";height:20px;width:20px;left:-0.2px;bottom:0px;background-color:#808080;-webkit-transition:0.4s ease-in-out;transition:0.4s ease-in-out}input:checked+.slider{background-color:#ff8095}input:focus+.slider{box-shadow:0 0 0 #bfbfbf}input:checked+.slider:before{-webkit-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px)}.slider.round{border-radius:20px}.slider.round:before{border-radius:50%}footer{margin:1rem 0;text-align:center}#search-input{border-radius:1px;border-width:1px;color:#454545;padding:5px;font-size:1rem;border:1px solid grey;width:30%;background:#f1f1f1}</style></head><body><header role="banner"><nav role="navigation"><ul><li><a style="text-decoration: none;" href="/elasticalva.github.io/" >Cover</a></li>•<li><a style="text-decoration: none;" href="/elasticalva.github.io/backnumbers" >Back Numbers</a></li>• <!--<li><a href="/elasticalva.github.io/beats" >Beats</a></li>•--><li><a style="text-decoration: none;" href="/elasticalva.github.io/about" >About</a></li><li><label class="switch" for="theme-switch"> <input type="checkbox" id="theme-switch" onclick="changeTheme()"> <span class="slider round"></span> </label></li></ul><script type="text/javascript"> document.getElementById("theme-switch").checked = localStorage.getItem("my-theme") === "dark" </script></nav></header><main id="main" role="main"><article class="post" role="article"><div class="meta"><h1>LAPD Crime Analysis</h1><time class="date" datetime="2020-06-10T00:00:00+02:00"> <a href="/elasticalva.github.io/tag/caca">caca</a> &middot; 2020</time><div class="meta"><p>South LA revisited with an OLS, Elastic Net, and Random Forest Regression.</p><ul><li>Authors: Elmer Camargo, Nicholas Trella, Geoffrey Hughes, Alberto Ng</li></ul><h1 id="motivation">Motivation</h1><p>The Tobacco Related Disease Research Program (TRDRP) funded Chapman University’s Crean College faculty Dr. Jason Douglas to continue a study in South Los Angeles pertaining to geography of crime surrounding nuisance properties in large urban low income communities of color (Subica et al., 2016). This paper identified key aspects of the problem space including: The community identification of nuisance properties to be tobacco shops, liquor stores, and marijuana dispensaries in South Los Angeles, the prevalence of nuisance properties and its ecological effects on crime and the community, and a theoretical framework outlining social disorganization to be a signal for a compromised system of social controls thus increasing risk of crime. The paper also conducts three statistical techniques to analyze crime, property types, and demographic data. A Kruskal Wallis H test comparing crime count means within buffers of nuisance properties and convenience stores, an ordinary least squares regression model predicting crime count within a census tract, and a geographic weighted regression model predicting crime count as well. Our study expands on the ordinary least squares regression model and includes an elastic net regression model and a random forest model and is updated for the year 2017 instead of 2014. Aside from the TRDRP stakeholders, beneficiaries from this study include: policy makers governing legislations, control boards, and zoning requirements, the community to push awareness of results, public health specialists to validate and expand on the study, and police forces to re-examine and focus efforts appropriately.</p><h1 id="data-sets">Data Sets</h1><p>Our project makes use of a variety of datasets. Some are downloaded from government websites, and others we made ourselves using the Google Places API to scrape location data. The full extent of our datasets came from the US Census, LAPD Crime data, LASD Crime data, the Center for Disease Control, and finally a python script that uses the Google Places API to scrape data on key search terms. In order to scrape location data for all places like liquor stores, dispensaries, parks, tobacco shops, and any other search term, I wrote a script in python. It takes in an initial point as the center for the search in longitude and latitude, a radius in meters to define the area of interest around that center point, and a list of keywords to query Google Places within that area. What gets output is a CSV file for each keyword containing the place’s name, longitude, latitude, address, zip code, rating, and some other variables. We then make use of this geolocation data to correctly locate each place and figure out which census tract they are in. From there, we can manipulate and play with the data to find crime trends among census tracts with varying numbers of, say, liquor stores or community centers. Along with our other downloaded and cleaned datasets, we make use of this scraped data to build our model and find trends in South LA. This program is dynamic, and can further be used to find places relevant to the input search terms anywhere google maps has data.</p><h1 id="data-wrangling">Data Wrangling</h1><p>Because our data came from a variety of sources, we applied a range of mutations and transformations in order to join our data into a single data frame. Census data had to be renamed and filtered down to only include South Los Angeles census tracts. Additional mutations were made thereafter to create a population density, community mobility, racial heterogeneity, and economic class variables. After the demographic mutations, crime and property type data points had to be joined to the South Los Angeles shapefile. To do so, we transformed the shapefile into a spatial feature and aggregated census tract sums for property and violent crime reports and property types. Following the spatial join, we used multivariate imputation via chained equations to predict and replace missing values in the mental and physical health variables. <br /><img src="/elasticalva.github.io/images/orientation.png" /> <br /><img src="/elasticalva.github.io/images/county_crime.png" /> <br /><img src="/elasticalva.github.io/images/sla_crime.jpg" /></p><h1 id="summary-statistics">Summary Statistics</h1><p>The South Los Angeles description from 2014 continues to hold valid from summary statistics in 2017. Hispanic and African American communities continue to be the predominant ethnicity group. <br /><img src="/elasticalva.github.io/images/demographics.png" /> Economically, South LA is for the most part middle class earning between $25,000 to $75,000, and lower class &lt;$10,000 to $24,999.<br /><img src="/elasticalva.github.io/images/econ_chars.png" /> From mapped variables, the north side of South LA is the most population dense likely due to the vicinity of the University of Southern California. <br /><img src="/elasticalva.github.io/images/pop_density.jpg" /> Alternatively, the north seems to have to have a lower unemployment rate than the rest of South LA, again potentially due to the vicinity of the USC and potentially better economic infrastructure and job opportunity. <br /><img src="/elasticalva.github.io/images/unemployment.jpg" /> Below poverty rates appear to be fairly spread out with the west side being slightly more poverty stricken. <br /><img src="/elasticalva.github.io/images/below_pov.jpg" /> Based off of publicly available data from the LAPD we were able to measure that reported crime in South LA steadily increased from 2010 to 2018 and reached a peak in 2017.<br /><img src="/images/crime_rate.jpg" /> Of these crimes larceny, narcotics related crime, and grand theft auto were the top three crimes in 2017 after crime data was reduced to only violent and property crimes. <br /><img src="/images/top_crimes.png" /></p><h1 id="regressions-ols-and-elastic-net">Regressions (OLS and Elastic Net)</h1><p>Given that crime count is continuous variable, we used an ordinary least squares regression model with nuisance property counts, community mobility, population density, unemployment rate, economic classes, racial heterogeneity, education levels, age, and physical and mental health as predictor variables. We also applied a training and test cross validation method to train our model on sixty percent of the census tracts and test on the remaining forty. <br /><img src="/elasticalva.github.io/images/ols_call.png" /> Doing so we calculated an R2 of .57 and an RMSE of 84.54 on the training set and an R2 of .39 and an RMSE of 82.79 on the test set. Variables displaying a p-value less than .05 included tobacco shops count, population density, below poverty count, and the imputed mental health estimate. We initially thought all variables would have a positive coefficient, however we were surprised to see that population density and the mental health estimates were negative. Population density we reasoned to have a negative impact on crime due to more people possibly dissuading criminal activity. The mental health estimate, we believe may have lost integrity after imputing missing values. <br /><img src="/elasticalva.github.io/images/ols_coef.png" /> <br /><img src="/elasticalva.github.io/images/ols_results.png" /> Although OLS provided suitable results we decided to use an elastic net model to validate findings. After elastic net alpha plotting we decided to use 0.5 as our hyperparameter so that we minimize cross validation loss and adjust for alpha penalization. <br /><img src="/elasticalva.github.io/images/enet.png" /> <br /><img src="/elasticalva.github.io/images/lambda.png" /> Some of the variables that were used were population density and education. With the results for RMSE and R2 for both the training set and test set, we can say that our model works better with test set, which we are happy to see. One interesting thing to point out is the population density has a big negative intercept which indicates a negative relationship. But with further thinking, we suspect this to either be a scaling issue on our hand or the student population in USC skewed the results. <br /><img src="/elasticalva.github.io/images/enet_call.png" /> <br /><img src="/elasticalva.github.io/images/enet_coef.png" /> <br /><img src="/elasticalva.github.io/images/enet_results.png" /></p><h1 id="random-forest">Random Forest</h1><p>We then decided that although the results from the Elastic Net outperformed OLS, there may be an even further efficacy increase if we were to implement a random forest model. Essentially an amalgamation of many decision trees, we thought that the potential classification nature of crime estimation would lend itself well to this type of model. With there being so many potential factors in where crime is most prevalent having variables selected in order of importance and frequency through average node depth could paint a better picture on the key determinants of crime. Crime most certainly begets crime but there must be a myriad of other potential factors for such a complex social phenomenon. Our random forest model was set with 1000 trees as we found that beyond that the computational power needed did not justify the minimal error improvements. Past a few hundred trees is where most of the error reduction occurs. <br /><img src="/images/rf_errors.png" /> <br /><img src="/images/importance.png" /> Harkening back to our initial exploration of the data, the random forest node depth output seemed to be in line with something previously noted. Two variables stood out here, being classified as below poverty (less than 30 thousand USD annual household income) and population density. This seemed to make sense as the lack of a steady income, coupled with a lack of people would make committing a crime that much more attractive. In doing a cross-chart of these two variables to see crime count estimations as a function of them individually and them together we were able to see an observable correlation between the presence of poverty and lack of people as being key indicators of crime. Likewise, where many people and those people are not in poverty we see less occurrences of criminal activity. <br /><img src="/images/pov_pop.png" /> Although our results seemed to paint a pretty decent picture of things to note by themselves it is hard to ascertain valuable information. We merely see a correlated impact between them without any say regarding the causality that may or may not be present. We’re quite confident that there is something about these two variables that have the observed impact however as it agrees with the previously established literature.</p><h1 id="conclusion">Conclusion</h1><p>From our studies, we found results similar to that of the previous 2014 study leading us to agree with prior findings. Population density and high poverty count hold a strong magnitude in estimating crime within a census tract, and there is also significant probability that tobacco shops and census tract mental health may also play a role. Although these findings were found to be significant using ordinary least squares, elastic net, and random forest regression, we however need to research further into using Moran’s autocorrelation coefficient (Moran’s I Index) and using parametric heteroscedasticity and autocorrelation consistent standard errors (Conley Spatial HAC) in order to refine results. Accounting for spatial statistical factors would further prove our findings that tobacco shops are likely to be affecting crime, population dense census tracts have lower crime counts, and poverty increases crime. Mental health may also potentially play a role, however further research would have to be conducted to determine whether or not an imputation was useful for the regression models, and if so, further investigation for reasons why it had a negative impact on crime. Overall, models performed well given the complexity of the task. Moving forward with this research in the future will include an analysis of years between 2014-2018 as well as include comparisons of other cities.</p></article></main><footer class="footer" role="contentinfo"> <small> PaperMgzn - Elasticalva </small></footer></body></html>
